.include "macros.inc"

.section .data, "wa"
.balign 0x8
lbl_803b7e80:
	.string "/shared2/wc24/nwc24fls.bin"
	.balign 4

.section .sdata, "wa"
.balign 0x8
FLFilePath:
	.incbin "baserom.dol", 0x3C7760, 0x4

.section .text, "ax"
.global NWC24iOpenSecretFriendList
NWC24iOpenSecretFriendList:
/* 8014A080 00144F80  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8014A084 00144F84  7C 08 02 A6 */	mflr r0
/* 8014A088 00144F88  38 80 00 00 */	li r4, 0
/* 8014A08C 00144F8C  38 A0 08 00 */	li r5, 0x800
/* 8014A090 00144F90  90 01 00 14 */	stw r0, 0x14(r1)
/* 8014A094 00144F94  80 6D A0 90 */	lwz r3, NWC24WorkP-_SDA_BASE_(r13)
/* 8014A098 00144F98  38 63 28 00 */	addi r3, r3, 0x2800
/* 8014A09C 00144F9C  90 61 00 08 */	stw r3, 8(r1)
/* 8014A0A0 00144FA0  4B FF 7E A1 */	bl Mail_memset
/* 8014A0A4 00144FA4  38 61 00 08 */	addi r3, r1, 8
/* 8014A0A8 00144FA8  48 00 00 15 */	bl GetCachedSecretFLHeader
/* 8014A0AC 00144FAC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8014A0B0 00144FB0  7C 08 03 A6 */	mtlr r0
/* 8014A0B4 00144FB4  38 21 00 10 */	addi r1, r1, 0x10
/* 8014A0B8 00144FB8  4E 80 00 20 */	blr 

.global GetCachedSecretFLHeader
GetCachedSecretFLHeader:
/* 8014A0BC 00144FBC  94 21 FF 50 */	stwu r1, -0xb0(r1)
/* 8014A0C0 00144FC0  7C 08 02 A6 */	mflr r0
/* 8014A0C4 00144FC4  90 01 00 B4 */	stw r0, 0xb4(r1)
/* 8014A0C8 00144FC8  93 E1 00 AC */	stw r31, 0xac(r1)
/* 8014A0CC 00144FCC  93 C1 00 A8 */	stw r30, 0xa8(r1)
/* 8014A0D0 00144FD0  7C 7E 1B 78 */	mr r30, r3
/* 8014A0D4 00144FD4  80 8D A0 90 */	lwz r4, NWC24WorkP-_SDA_BASE_(r13)
/* 8014A0D8 00144FD8  38 84 28 00 */	addi r4, r4, 0x2800
/* 8014A0DC 00144FDC  90 83 00 00 */	stw r4, 0(r3)
/* 8014A0E0 00144FE0  80 64 00 00 */	lwz r3, 0(r4)
/* 8014A0E4 00144FE4  3C 03 A8 9D */	addis r0, r3, 0xa89d
/* 8014A0E8 00144FE8  28 00 46 73 */	cmplwi r0, 0x4673
/* 8014A0EC 00144FEC  41 82 00 94 */	beq lbl_8014A180
/* 8014A0F0 00144FF0  80 8D 87 60 */	lwz r4, FLFilePath-_SDA_BASE_(r13)
/* 8014A0F4 00144FF4  38 61 00 08 */	addi r3, r1, 8
/* 8014A0F8 00144FF8  38 A0 00 02 */	li r5, 2
/* 8014A0FC 00144FFC  4B FF 8A 29 */	bl NWC24FOpen
/* 8014A100 00145000  2C 03 00 00 */	cmpwi r3, 0
/* 8014A104 00145004  41 82 00 08 */	beq lbl_8014A10C
/* 8014A108 00145008  48 00 00 7C */	b lbl_8014A184
lbl_8014A10C:
/* 8014A10C 0014500C  38 61 00 08 */	addi r3, r1, 8
/* 8014A110 00145010  38 80 00 00 */	li r4, 0
/* 8014A114 00145014  38 A0 00 00 */	li r5, 0
/* 8014A118 00145018  4B FF 8E F1 */	bl NWC24FSeek
/* 8014A11C 0014501C  80 7E 00 00 */	lwz r3, 0(r30)
/* 8014A120 00145020  38 A1 00 08 */	addi r5, r1, 8
/* 8014A124 00145024  38 80 08 00 */	li r4, 0x800
/* 8014A128 00145028  4B FF 90 CD */	bl NWC24FRead
/* 8014A12C 0014502C  7C 7F 1B 78 */	mr r31, r3
/* 8014A130 00145030  38 61 00 08 */	addi r3, r1, 8
/* 8014A134 00145034  4B FF 8D 41 */	bl NWC24FClose
/* 8014A138 00145038  2C 1F 00 00 */	cmpwi r31, 0
/* 8014A13C 0014503C  41 82 00 08 */	beq lbl_8014A144
/* 8014A140 00145040  7F E3 FB 78 */	mr r3, r31
lbl_8014A144:
/* 8014A144 00145044  2C 03 00 00 */	cmpwi r3, 0
/* 8014A148 00145048  41 82 00 08 */	beq lbl_8014A150
/* 8014A14C 0014504C  48 00 00 38 */	b lbl_8014A184
lbl_8014A150:
/* 8014A150 00145050  80 9E 00 00 */	lwz r4, 0(r30)
/* 8014A154 00145054  80 64 00 00 */	lwz r3, 0(r4)
/* 8014A158 00145058  3C 03 A8 9D */	addis r0, r3, 0xa89d
/* 8014A15C 0014505C  28 00 46 73 */	cmplwi r0, 0x4673
/* 8014A160 00145060  41 82 00 0C */	beq lbl_8014A16C
/* 8014A164 00145064  38 60 FF F2 */	li r3, -14
/* 8014A168 00145068  48 00 00 1C */	b lbl_8014A184
lbl_8014A16C:
/* 8014A16C 0014506C  80 04 00 04 */	lwz r0, 4(r4)
/* 8014A170 00145070  28 00 00 02 */	cmplwi r0, 2
/* 8014A174 00145074  41 82 00 0C */	beq lbl_8014A180
/* 8014A178 00145078  38 60 FF E5 */	li r3, -27
/* 8014A17C 0014507C  48 00 00 08 */	b lbl_8014A184
lbl_8014A180:
/* 8014A180 00145080  38 60 00 00 */	li r3, 0
lbl_8014A184:
/* 8014A184 00145084  80 01 00 B4 */	lwz r0, 0xb4(r1)
/* 8014A188 00145088  83 E1 00 AC */	lwz r31, 0xac(r1)
/* 8014A18C 0014508C  83 C1 00 A8 */	lwz r30, 0xa8(r1)
/* 8014A190 00145090  7C 08 03 A6 */	mtlr r0
/* 8014A194 00145094  38 21 00 B0 */	addi r1, r1, 0xb0
/* 8014A198 00145098  4E 80 00 20 */	blr 
