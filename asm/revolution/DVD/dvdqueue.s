.include "macros.inc"

.section .bss, "wa"
.balign 0x8
WaitingQueue:
    # actually 0x20
    # the next file has a BSS pool so the file boundary is aligned to 32?
	.skip 0x30

.section .text, "ax"
.global __DVDClearWaitingQueue
__DVDClearWaitingQueue:
/* 8013E3DC 001392DC  3C C0 80 48 */	lis r6, WaitingQueue@ha
/* 8013E3E0 001392E0  38 C6 A0 90 */	addi r6, r6, WaitingQueue@l
/* 8013E3E4 001392E4  38 A6 00 08 */	addi r5, r6, 8
/* 8013E3E8 001392E8  90 C6 00 00 */	stw r6, 0(r6)
/* 8013E3EC 001392EC  38 86 00 10 */	addi r4, r6, 0x10
/* 8013E3F0 001392F0  38 66 00 18 */	addi r3, r6, 0x18
/* 8013E3F4 001392F4  90 C6 00 04 */	stw r6, 4(r6)
/* 8013E3F8 001392F8  90 A6 00 08 */	stw r5, 8(r6)
/* 8013E3FC 001392FC  90 A6 00 0C */	stw r5, 0xc(r6)
/* 8013E400 00139300  90 86 00 10 */	stw r4, 0x10(r6)
/* 8013E404 00139304  90 86 00 14 */	stw r4, 0x14(r6)
/* 8013E408 00139308  90 66 00 18 */	stw r3, 0x18(r6)
/* 8013E40C 0013930C  90 66 00 1C */	stw r3, 0x1c(r6)
/* 8013E410 00139310  4E 80 00 20 */	blr 

.global __DVDPushWaitingQueue
__DVDPushWaitingQueue:
/* 8013E414 00139314  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8013E418 00139318  7C 08 02 A6 */	mflr r0
/* 8013E41C 0013931C  90 01 00 14 */	stw r0, 0x14(r1)
/* 8013E420 00139320  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8013E424 00139324  7C 9F 23 78 */	mr r31, r4
/* 8013E428 00139328  93 C1 00 08 */	stw r30, 8(r1)
/* 8013E42C 0013932C  7C 7E 1B 78 */	mr r30, r3
/* 8013E430 00139330  4B FB 34 91 */	bl OSDisableInterrupts
/* 8013E434 00139334  3C 80 80 48 */	lis r4, WaitingQueue@ha
/* 8013E438 00139338  57 C0 18 38 */	slwi r0, r30, 3
/* 8013E43C 0013933C  38 84 A0 90 */	addi r4, r4, WaitingQueue@l
/* 8013E440 00139340  7C A4 02 14 */	add r5, r4, r0
/* 8013E444 00139344  80 85 00 04 */	lwz r4, 4(r5)
/* 8013E448 00139348  93 E4 00 00 */	stw r31, 0(r4)
/* 8013E44C 0013934C  80 05 00 04 */	lwz r0, 4(r5)
/* 8013E450 00139350  90 1F 00 04 */	stw r0, 4(r31)
/* 8013E454 00139354  90 BF 00 00 */	stw r5, 0(r31)
/* 8013E458 00139358  93 E5 00 04 */	stw r31, 4(r5)
/* 8013E45C 0013935C  4B FB 34 8D */	bl OSRestoreInterrupts
/* 8013E460 00139360  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8013E464 00139364  38 60 00 01 */	li r3, 1
/* 8013E468 00139368  83 C1 00 08 */	lwz r30, 8(r1)
/* 8013E46C 0013936C  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8013E470 00139370  7C 08 03 A6 */	mtlr r0
/* 8013E474 00139374  38 21 00 10 */	addi r1, r1, 0x10
/* 8013E478 00139378  4E 80 00 20 */	blr 

.global __DVDPopWaitingQueue
__DVDPopWaitingQueue:
/* 8013E47C 0013937C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8013E480 00139380  7C 08 02 A6 */	mflr r0
/* 8013E484 00139384  90 01 00 14 */	stw r0, 0x14(r1)
/* 8013E488 00139388  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8013E48C 0013938C  4B FB 34 35 */	bl OSDisableInterrupts
/* 8013E490 00139390  3C 80 80 48 */	lis r4, WaitingQueue@ha
/* 8013E494 00139394  38 00 00 04 */	li r0, 4
/* 8013E498 00139398  3B E0 00 00 */	li r31, 0
/* 8013E49C 0013939C  38 84 A0 90 */	addi r4, r4, WaitingQueue@l
/* 8013E4A0 001393A0  7C 09 03 A6 */	mtctr r0
lbl_8013E4A4:
/* 8013E4A4 001393A4  80 04 00 00 */	lwz r0, 0(r4)
/* 8013E4A8 001393A8  7C 00 20 40 */	cmplw r0, r4
/* 8013E4AC 001393AC  41 82 00 48 */	beq lbl_8013E4F4
/* 8013E4B0 001393B0  4B FB 34 39 */	bl OSRestoreInterrupts
/* 8013E4B4 001393B4  4B FB 34 0D */	bl OSDisableInterrupts
/* 8013E4B8 001393B8  3C 80 80 48 */	lis r4, WaitingQueue@ha
/* 8013E4BC 001393BC  57 E0 18 38 */	slwi r0, r31, 3
/* 8013E4C0 001393C0  38 84 A0 90 */	addi r4, r4, WaitingQueue@l
/* 8013E4C4 001393C4  7F E4 00 2E */	lwzx r31, r4, r0
/* 8013E4C8 001393C8  7C A4 02 14 */	add r5, r4, r0
/* 8013E4CC 001393CC  80 1F 00 00 */	lwz r0, 0(r31)
/* 8013E4D0 001393D0  90 05 00 00 */	stw r0, 0(r5)
/* 8013E4D4 001393D4  80 9F 00 00 */	lwz r4, 0(r31)
/* 8013E4D8 001393D8  90 A4 00 04 */	stw r5, 4(r4)
/* 8013E4DC 001393DC  4B FB 34 0D */	bl OSRestoreInterrupts
/* 8013E4E0 001393E0  38 00 00 00 */	li r0, 0
/* 8013E4E4 001393E4  7F E3 FB 78 */	mr r3, r31
/* 8013E4E8 001393E8  90 1F 00 00 */	stw r0, 0(r31)
/* 8013E4EC 001393EC  90 1F 00 04 */	stw r0, 4(r31)
/* 8013E4F0 001393F0  48 00 00 18 */	b lbl_8013E508
lbl_8013E4F4:
/* 8013E4F4 001393F4  38 84 00 08 */	addi r4, r4, 8
/* 8013E4F8 001393F8  3B FF 00 01 */	addi r31, r31, 1
/* 8013E4FC 001393FC  42 00 FF A8 */	bdnz lbl_8013E4A4
/* 8013E500 00139400  4B FB 33 E9 */	bl OSRestoreInterrupts
/* 8013E504 00139404  38 60 00 00 */	li r3, 0
lbl_8013E508:
/* 8013E508 00139408  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8013E50C 0013940C  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8013E510 00139410  7C 08 03 A6 */	mtlr r0
/* 8013E514 00139414  38 21 00 10 */	addi r1, r1, 0x10
/* 8013E518 00139418  4E 80 00 20 */	blr 

.global __DVDCheckWaitingQueue
__DVDCheckWaitingQueue:
/* 8013E51C 0013941C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8013E520 00139420  7C 08 02 A6 */	mflr r0
/* 8013E524 00139424  90 01 00 14 */	stw r0, 0x14(r1)
/* 8013E528 00139428  4B FB 33 99 */	bl OSDisableInterrupts
/* 8013E52C 0013942C  3C 80 80 48 */	lis r4, WaitingQueue@ha
/* 8013E530 00139430  38 00 00 04 */	li r0, 4
/* 8013E534 00139434  38 84 A0 90 */	addi r4, r4, WaitingQueue@l
/* 8013E538 00139438  7C 09 03 A6 */	mtctr r0
lbl_8013E53C:
/* 8013E53C 0013943C  80 04 00 00 */	lwz r0, 0(r4)
/* 8013E540 00139440  7C 00 20 40 */	cmplw r0, r4
/* 8013E544 00139444  41 82 00 10 */	beq lbl_8013E554
/* 8013E548 00139448  4B FB 33 A1 */	bl OSRestoreInterrupts
/* 8013E54C 0013944C  38 60 00 01 */	li r3, 1
/* 8013E550 00139450  48 00 00 14 */	b lbl_8013E564
lbl_8013E554:
/* 8013E554 00139454  38 84 00 08 */	addi r4, r4, 8
/* 8013E558 00139458  42 00 FF E4 */	bdnz lbl_8013E53C
/* 8013E55C 0013945C  4B FB 33 8D */	bl OSRestoreInterrupts
/* 8013E560 00139460  38 60 00 00 */	li r3, 0
lbl_8013E564:
/* 8013E564 00139464  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8013E568 00139468  7C 08 03 A6 */	mtlr r0
/* 8013E56C 0013946C  38 21 00 10 */	addi r1, r1, 0x10
/* 8013E570 00139470  4E 80 00 20 */	blr 

.global __DVDGetNextWaitingQueue
__DVDGetNextWaitingQueue:
/* 8013E574 00139474  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8013E578 00139478  7C 08 02 A6 */	mflr r0
/* 8013E57C 0013947C  90 01 00 14 */	stw r0, 0x14(r1)
/* 8013E580 00139480  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8013E584 00139484  4B FB 33 3D */	bl OSDisableInterrupts
/* 8013E588 00139488  3C 80 80 48 */	lis r4, WaitingQueue@ha
/* 8013E58C 0013948C  38 00 00 04 */	li r0, 4
/* 8013E590 00139490  38 84 A0 90 */	addi r4, r4, WaitingQueue@l
/* 8013E594 00139494  7C 09 03 A6 */	mtctr r0
lbl_8013E598:
/* 8013E598 00139498  83 E4 00 00 */	lwz r31, 0(r4)
/* 8013E59C 0013949C  7C 1F 20 40 */	cmplw r31, r4
/* 8013E5A0 001394A0  41 82 00 10 */	beq lbl_8013E5B0
/* 8013E5A4 001394A4  4B FB 33 45 */	bl OSRestoreInterrupts
/* 8013E5A8 001394A8  7F E3 FB 78 */	mr r3, r31
/* 8013E5AC 001394AC  48 00 00 14 */	b lbl_8013E5C0
lbl_8013E5B0:
/* 8013E5B0 001394B0  38 84 00 08 */	addi r4, r4, 8
/* 8013E5B4 001394B4  42 00 FF E4 */	bdnz lbl_8013E598
/* 8013E5B8 001394B8  4B FB 33 31 */	bl OSRestoreInterrupts
/* 8013E5BC 001394BC  38 60 00 00 */	li r3, 0
lbl_8013E5C0:
/* 8013E5C0 001394C0  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8013E5C4 001394C4  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8013E5C8 001394C8  7C 08 03 A6 */	mtlr r0
/* 8013E5CC 001394CC  38 21 00 10 */	addi r1, r1, 0x10
/* 8013E5D0 001394D0  4E 80 00 20 */	blr 

.global __DVDDequeueWaitingQueue
__DVDDequeueWaitingQueue:
/* 8013E5D4 001394D4  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8013E5D8 001394D8  7C 08 02 A6 */	mflr r0
/* 8013E5DC 001394DC  90 01 00 14 */	stw r0, 0x14(r1)
/* 8013E5E0 001394E0  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8013E5E4 001394E4  7C 7F 1B 78 */	mr r31, r3
/* 8013E5E8 001394E8  4B FB 32 D9 */	bl OSDisableInterrupts
/* 8013E5EC 001394EC  80 9F 00 04 */	lwz r4, 4(r31)
/* 8013E5F0 001394F0  80 BF 00 00 */	lwz r5, 0(r31)
/* 8013E5F4 001394F4  2C 04 00 00 */	cmpwi r4, 0
/* 8013E5F8 001394F8  41 82 00 0C */	beq lbl_8013E604
/* 8013E5FC 001394FC  2C 05 00 00 */	cmpwi r5, 0
/* 8013E600 00139500  40 82 00 10 */	bne lbl_8013E610
lbl_8013E604:
/* 8013E604 00139504  4B FB 32 E5 */	bl OSRestoreInterrupts
/* 8013E608 00139508  38 60 00 00 */	li r3, 0
/* 8013E60C 0013950C  48 00 00 14 */	b lbl_8013E620
lbl_8013E610:
/* 8013E610 00139510  90 A4 00 00 */	stw r5, 0(r4)
/* 8013E614 00139514  90 85 00 04 */	stw r4, 4(r5)
/* 8013E618 00139518  4B FB 32 D1 */	bl OSRestoreInterrupts
/* 8013E61C 0013951C  38 60 00 01 */	li r3, 1
lbl_8013E620:
/* 8013E620 00139520  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8013E624 00139524  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8013E628 00139528  7C 08 03 A6 */	mtlr r0
/* 8013E62C 0013952C  38 21 00 10 */	addi r1, r1, 0x10
/* 8013E630 00139530  4E 80 00 20 */	blr 
