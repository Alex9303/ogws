.include "macros.inc"

.section .sdata2, "a"
.balign 0x8
lbl_804C13E0:
	.incbin "baserom.dol", 0x3CA020, 0x8

.section .rodata, "a"
.balign 0x8
lbl_8037caf0: # unnamed data
	.incbin "baserom.dol", 0x378BF0, 0x40

.section .text, "ax"
.global WENCGetEncodeData
WENCGetEncodeData:
/* 80141770 0013C670  94 21 FF 70 */	stwu r1, -0x90(r1)
/* 80141774 0013C674  7C 08 02 A6 */	mflr r0
/* 80141778 0013C678  90 01 00 94 */	stw r0, 0x94(r1)
/* 8014177C 0013C67C  39 61 00 90 */	addi r11, r1, 0x90
/* 80141780 0013C680  4B F7 05 A1 */	bl _savegpr_18
/* 80141784 0013C684  3D 40 80 38 */	lis r10, lbl_8037caf0@ha
/* 80141788 0013C688  85 2A CA F0 */	lwzu r9, lbl_8037caf0@l(r10)
/* 8014178C 0013C68C  39 66 00 01 */	addi r11, r6, 1
/* 80141790 0013C690  7C 99 23 78 */	mr r25, r4
/* 80141794 0013C694  55 64 0F FE */	srwi r4, r11, 0x1f
/* 80141798 0013C698  81 0A 00 04 */	lwz r8, 4(r10)
/* 8014179C 0013C69C  7C FF 3B 78 */	mr r31, r7
/* 801417A0 0013C6A0  80 0A 00 08 */	lwz r0, 8(r10)
/* 801417A4 0013C6A4  7C 84 5A 14 */	add r4, r4, r11
/* 801417A8 0013C6A8  82 4A 00 0C */	lwz r18, 0xc(r10)
/* 801417AC 0013C6AC  83 6A 00 10 */	lwz r27, 0x10(r10)
/* 801417B0 0013C6B0  7C DE 33 78 */	mr r30, r6
/* 801417B4 0013C6B4  83 4A 00 14 */	lwz r26, 0x14(r10)
/* 801417B8 0013C6B8  7C 7C 1B 78 */	mr r28, r3
/* 801417BC 0013C6BC  83 0A 00 18 */	lwz r24, 0x18(r10)
/* 801417C0 0013C6C0  7C BD 2B 78 */	mr r29, r5
/* 801417C4 0013C6C4  82 EA 00 1C */	lwz r23, 0x1c(r10)
/* 801417C8 0013C6C8  7C 85 0E 70 */	srawi r5, r4, 1
/* 801417CC 0013C6CC  82 CA 00 20 */	lwz r22, 0x20(r10)
/* 801417D0 0013C6D0  7F E3 FB 78 */	mr r3, r31
/* 801417D4 0013C6D4  82 AA 00 24 */	lwz r21, 0x24(r10)
/* 801417D8 0013C6D8  38 80 00 00 */	li r4, 0
/* 801417DC 0013C6DC  82 8A 00 28 */	lwz r20, 0x28(r10)
/* 801417E0 0013C6E0  82 6A 00 2C */	lwz r19, 0x2c(r10)
/* 801417E4 0013C6E4  81 8A 00 30 */	lwz r12, 0x30(r10)
/* 801417E8 0013C6E8  81 6A 00 34 */	lwz r11, 0x34(r10)
/* 801417EC 0013C6EC  80 EA 00 38 */	lwz r7, 0x38(r10)
/* 801417F0 0013C6F0  80 CA 00 3C */	lwz r6, 0x3c(r10)
/* 801417F4 0013C6F4  91 21 00 08 */	stw r9, 8(r1)
/* 801417F8 0013C6F8  91 01 00 0C */	stw r8, 0xc(r1)
/* 801417FC 0013C6FC  90 01 00 10 */	stw r0, 0x10(r1)
/* 80141800 0013C700  92 41 00 14 */	stw r18, 0x14(r1)
/* 80141804 0013C704  93 61 00 18 */	stw r27, 0x18(r1)
/* 80141808 0013C708  93 41 00 1C */	stw r26, 0x1c(r1)
/* 8014180C 0013C70C  93 01 00 20 */	stw r24, 0x20(r1)
/* 80141810 0013C710  92 E1 00 24 */	stw r23, 0x24(r1)
/* 80141814 0013C714  92 C1 00 28 */	stw r22, 0x28(r1)
/* 80141818 0013C718  92 A1 00 2C */	stw r21, 0x2c(r1)
/* 8014181C 0013C71C  92 81 00 30 */	stw r20, 0x30(r1)
/* 80141820 0013C720  92 61 00 34 */	stw r19, 0x34(r1)
/* 80141824 0013C724  91 81 00 38 */	stw r12, 0x38(r1)
/* 80141828 0013C728  91 61 00 3C */	stw r11, 0x3c(r1)
/* 8014182C 0013C72C  90 E1 00 40 */	stw r7, 0x40(r1)
/* 80141830 0013C730  90 C1 00 44 */	stw r6, 0x44(r1)
/* 80141834 0013C734  4B EC 28 D1 */	bl memset
/* 80141838 0013C738  57 20 07 FF */	clrlwi. r0, r25, 0x1f
/* 8014183C 0013C73C  40 82 00 20 */	bne lbl_8014185C
/* 80141840 0013C740  39 60 00 00 */	li r11, 0
/* 80141844 0013C744  39 80 00 7F */	li r12, 0x7f
/* 80141848 0013C748  38 A0 00 00 */	li r5, 0
/* 8014184C 0013C74C  3B 60 00 00 */	li r27, 0
/* 80141850 0013C750  3B 40 00 00 */	li r26, 0
/* 80141854 0013C754  3B 20 00 00 */	li r25, 0
/* 80141858 0013C758  48 00 00 1C */	b lbl_80141874
lbl_8014185C:
/* 8014185C 0013C75C  81 7C 00 00 */	lwz r11, 0(r28)
/* 80141860 0013C760  81 9C 00 04 */	lwz r12, 4(r28)
/* 80141864 0013C764  80 BC 00 08 */	lwz r5, 8(r28)
/* 80141868 0013C768  83 7C 00 0C */	lwz r27, 0xc(r28)
/* 8014186C 0013C76C  83 5C 00 10 */	lwz r26, 0x10(r28)
/* 80141870 0013C770  83 3C 00 14 */	lwz r25, 0x14(r28)
lbl_80141874:
/* 80141874 0013C774  3C 60 00 01 */	lis r3, 0x0000FFFF@ha
/* 80141878 0013C778  3B 01 00 08 */	addi r24, r1, 8
/* 8014187C 0013C77C  C8 42 99 C0 */	lfd f2, lbl_804C13E0-_SDA2_BASE_(r2)
/* 80141880 0013C780  38 83 FF FF */	addi r4, r3, 0x0000FFFF@l
/* 80141884 0013C784  38 C0 00 00 */	li r6, 0
/* 80141888 0013C788  3C 00 FF FF */	lis r0, 0xffff
/* 8014188C 0013C78C  3E E0 43 30 */	lis r23, 0x4330
/* 80141890 0013C790  7F C9 03 A6 */	mtctr r30
/* 80141894 0013C794  2C 1E 00 00 */	cmpwi r30, 0
/* 80141898 0013C798  40 81 01 7C */	ble lbl_80141A14
lbl_8014189C:
/* 8014189C 0013C79C  A8 BD 00 00 */	lha r5, 0(r29)
/* 801418A0 0013C7A0  39 40 00 00 */	li r10, 0
/* 801418A4 0013C7A4  39 20 00 00 */	li r9, 0
/* 801418A8 0013C7A8  39 00 00 00 */	li r8, 0
/* 801418AC 0013C7AC  7C 05 58 00 */	cmpw r5, r11
/* 801418B0 0013C7B0  38 E0 00 00 */	li r7, 0
/* 801418B4 0013C7B4  3B BD 00 02 */	addi r29, r29, 2
/* 801418B8 0013C7B8  40 80 00 08 */	bge lbl_801418C0
/* 801418BC 0013C7BC  38 E0 00 01 */	li r7, 1
lbl_801418C0:
/* 801418C0 0013C7C0  7E 6B 28 50 */	subf r19, r11, r5
/* 801418C4 0013C7C4  7E 65 FE 70 */	srawi r5, r19, 0x1f
/* 801418C8 0013C7C8  7C BB 9A 78 */	xor r27, r5, r19
/* 801418CC 0013C7CC  7F 65 D8 50 */	subf r27, r5, r27
/* 801418D0 0013C7D0  7C 1B 60 00 */	cmpw r27, r12
/* 801418D4 0013C7D4  41 80 00 0C */	blt lbl_801418E0
/* 801418D8 0013C7D8  39 00 00 01 */	li r8, 1
/* 801418DC 0013C7DC  7F 6C D8 50 */	subf r27, r12, r27
lbl_801418E0:
/* 801418E0 0013C7E0  55 85 0F FE */	srwi r5, r12, 0x1f
/* 801418E4 0013C7E4  7C A5 62 14 */	add r5, r5, r12
/* 801418E8 0013C7E8  7C BA 0E 70 */	srawi r26, r5, 1
/* 801418EC 0013C7EC  7C 1B D0 00 */	cmpw r27, r26
/* 801418F0 0013C7F0  41 80 00 0C */	blt lbl_801418FC
/* 801418F4 0013C7F4  39 20 00 01 */	li r9, 1
/* 801418F8 0013C7F8  7F 7A D8 50 */	subf r27, r26, r27
lbl_801418FC:
/* 801418FC 0013C7FC  57 45 0F FE */	srwi r5, r26, 0x1f
/* 80141900 0013C800  7C A5 D2 14 */	add r5, r5, r26
/* 80141904 0013C804  7C B9 0E 70 */	srawi r25, r5, 1
/* 80141908 0013C808  7C 1B C8 00 */	cmpw r27, r25
/* 8014190C 0013C80C  41 80 00 0C */	blt lbl_80141918
/* 80141910 0013C810  39 40 00 01 */	li r10, 1
/* 80141914 0013C814  7F 79 D8 50 */	subf r27, r25, r27
lbl_80141918:
/* 80141918 0013C818  7E 99 51 D6 */	mullw r20, r25, r10
/* 8014191C 0013C81C  54 E5 08 3C */	slwi r5, r7, 1
/* 80141920 0013C820  57 33 0F FE */	srwi r19, r25, 0x1f
/* 80141924 0013C824  20 A5 00 01 */	subfic r5, r5, 1
/* 80141928 0013C828  7E 73 CA 14 */	add r19, r19, r25
/* 8014192C 0013C82C  7E AC 41 D6 */	mullw r21, r12, r8
/* 80141930 0013C830  7E 73 0E 70 */	srawi r19, r19, 1
/* 80141934 0013C834  7E DA 49 D6 */	mullw r22, r26, r9
/* 80141938 0013C838  7E B4 AA 14 */	add r21, r20, r21
/* 8014193C 0013C83C  7E D3 B2 14 */	add r22, r19, r22
/* 80141940 0013C840  7E D5 B2 14 */	add r22, r21, r22
/* 80141944 0013C844  7C A5 B1 D6 */	mullw r5, r5, r22
/* 80141948 0013C848  7C 05 20 00 */	cmpw r5, r4
/* 8014194C 0013C84C  40 81 00 08 */	ble lbl_80141954
/* 80141950 0013C850  38 A3 FF FF */	addi r5, r3, -1
lbl_80141954:
/* 80141954 0013C854  7C 05 00 00 */	cmpw r5, r0
/* 80141958 0013C858  40 80 00 08 */	bge lbl_80141960
/* 8014195C 0013C85C  3C A0 FF FF */	lis r5, 0xffff
lbl_80141960:
/* 80141960 0013C860  7D 6B 2A 14 */	add r11, r11, r5
/* 80141964 0013C864  2C 0B 7F FF */	cmpwi r11, 0x7fff
/* 80141968 0013C868  40 81 00 08 */	ble lbl_80141970
/* 8014196C 0013C86C  39 60 7F FF */	li r11, 0x7fff
lbl_80141970:
/* 80141970 0013C870  2C 0B 80 00 */	cmpwi r11, -32768
/* 80141974 0013C874  40 80 00 08 */	bge lbl_8014197C
/* 80141978 0013C878  39 60 80 00 */	li r11, -32768
lbl_8014197C:
/* 8014197C 0013C87C  6D 8C 80 00 */	xoris r12, r12, 0x8000
/* 80141980 0013C880  55 12 10 3A */	slwi r18, r8, 2
/* 80141984 0013C884  91 81 00 4C */	stw r12, 0x4c(r1)
/* 80141988 0013C888  54 D6 07 FE */	clrlwi r22, r6, 0x1f
/* 8014198C 0013C88C  55 29 08 3C */	slwi r9, r9, 1
/* 80141990 0013C890  7D 0A 92 14 */	add r8, r10, r18
/* 80141994 0013C894  92 E1 00 48 */	stw r23, 0x48(r1)
/* 80141998 0013C898  7D 09 42 14 */	add r8, r9, r8
/* 8014199C 0013C89C  55 08 18 38 */	slwi r8, r8, 3
/* 801419A0 0013C8A0  54 CC 0F FE */	srwi r12, r6, 0x1f
/* 801419A4 0013C8A4  C8 21 00 48 */	lfd f1, 0x48(r1)
/* 801419A8 0013C8A8  7D 29 92 14 */	add r9, r9, r18
/* 801419AC 0013C8AC  7C 18 44 AE */	lfdx f0, r24, r8
/* 801419B0 0013C8B0  7D 0C 32 14 */	add r8, r12, r6
/* 801419B4 0013C8B4  FC 21 10 28 */	fsub f1, f1, f2
/* 801419B8 0013C8B8  7D 0C 0E 70 */	srawi r12, r8, 1
/* 801419BC 0013C8BC  54 E8 18 38 */	slwi r8, r7, 3
/* 801419C0 0013C8C0  7C EA 4A 14 */	add r7, r10, r9
/* 801419C4 0013C8C4  7C E8 3A 14 */	add r7, r8, r7
/* 801419C8 0013C8C8  3A D6 FF FF */	addi r22, r22, -1
/* 801419CC 0013C8CC  FC 01 00 32 */	fmul f0, f1, f0
/* 801419D0 0013C8D0  56 C9 07 7A */	rlwinm r9, r22, 0, 0x1d, 0x1d
/* 801419D4 0013C8D4  54 E7 06 3E */	clrlwi r7, r7, 0x18
/* 801419D8 0013C8D8  7D 1F 60 AE */	lbzx r8, r31, r12
/* 801419DC 0013C8DC  7C E7 48 30 */	slw r7, r7, r9
/* 801419E0 0013C8E0  7D 07 3B 78 */	or r7, r8, r7
/* 801419E4 0013C8E4  FC 00 00 1E */	fctiwz f0, f0
/* 801419E8 0013C8E8  7C FF 61 AE */	stbx r7, r31, r12
/* 801419EC 0013C8EC  D8 01 00 50 */	stfd f0, 0x50(r1)
/* 801419F0 0013C8F0  81 81 00 54 */	lwz r12, 0x54(r1)
/* 801419F4 0013C8F4  2C 0C 00 7F */	cmpwi r12, 0x7f
/* 801419F8 0013C8F8  41 81 00 08 */	bgt lbl_80141A00
/* 801419FC 0013C8FC  39 80 00 7F */	li r12, 0x7f
lbl_80141A00:
/* 80141A00 0013C900  2C 0C 60 00 */	cmpwi r12, 0x6000
/* 80141A04 0013C904  41 80 00 08 */	blt lbl_80141A0C
/* 80141A08 0013C908  39 80 60 00 */	li r12, 0x6000
lbl_80141A0C:
/* 80141A0C 0013C90C  38 C6 00 01 */	addi r6, r6, 1
/* 80141A10 0013C910  42 00 FE 8C */	bdnz lbl_8014189C
lbl_80141A14:
/* 80141A14 0013C914  91 7C 00 00 */	stw r11, 0(r28)
/* 80141A18 0013C918  39 61 00 90 */	addi r11, r1, 0x90
/* 80141A1C 0013C91C  7F C3 F3 78 */	mr r3, r30
/* 80141A20 0013C920  91 9C 00 04 */	stw r12, 4(r28)
/* 80141A24 0013C924  90 BC 00 08 */	stw r5, 8(r28)
/* 80141A28 0013C928  93 7C 00 0C */	stw r27, 0xc(r28)
/* 80141A2C 0013C92C  93 5C 00 10 */	stw r26, 0x10(r28)
/* 80141A30 0013C930  93 3C 00 14 */	stw r25, 0x14(r28)
/* 80141A34 0013C934  4B F7 03 39 */	bl _restgpr_18
/* 80141A38 0013C938  80 01 00 94 */	lwz r0, 0x94(r1)
/* 80141A3C 0013C93C  7C 08 03 A6 */	mtlr r0
/* 80141A40 0013C940  38 21 00 90 */	addi r1, r1, 0x90
/* 80141A44 0013C944  4E 80 00 20 */	blr 
